@using System.Security.Claims
@model List<LexusTech.Models.Consumo>

@{
    ViewData["Title"] = "Dashboard";
    var userId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
}

<div>
    <!-- Menu Lateral -->
    <aside id="sidebar" style="width: 250px; position: fixed; height: 100%; background-color: #f8f9fa; border-right: 1px solid #ddd; display: flex; flex-direction: column; transition: all 0.3s;">
        <h3 style="text-align: center; padding: 20px 0; border-bottom: 1px solid #ddd; font-size: Medium;">Menu</h3>
        <nav style="flex: 1; padding: 10px;">
            <ul style="list-style: none; padding: 0; margin: 0;">
                
                <li style="padding: 10px; border-bottom: 1px solid #ddd;">
                    <a asp-controller="DadosCadastrais" asp-action="Consultar" style="text-decoration: none; color: #333; display: flex; align-items: center;">
                        <span class="icon" style="margin-right: 10px;">üë§</span>
                        <span>Dados cadastrais</span>
                    </a>
                </li>
                <li style="padding: 10px; border-bottom: 1px solid #ddd;">
                    <a asp-controller="Endereco" asp-action="Criar" style="text-decoration: none; color: #333; display: flex; align-items: center;">
                        <span class="icon" style="margin-right: 10px;">‚öôÔ∏è</span>
                        <span>Configura√ß√µes</span>
                    </a>
                </li>
                <li style="padding: 10px; border-bottom: 1px solid #ddd;">
                    <a asp-controller="Mapa" asp-action="Index"  style="text-decoration: none; color: #333; display: flex; align-items: center;">
                        <span class="icon" style="margin-right: 10px;">üìä</span>
                        <span>Mapa de Consumo</span>
                    </a>
                </li>
                <li style="padding: 10px; border-bottom: 1px solid #ddd;">
                    <a asp-controller="Consumo" asp-action="Consultar"  style="text-decoration: none; color: #333; display: flex; align-items: center;">
                        <span class="icon" style="margin-right: 10px;">üìà</span>
                        <span>Consumo</span>
                    </a>
                </li>
                <li style="padding: 10px; border-bottom: 1px solid #ddd;">
                    <a asp-controller="Usuario" asp-action="Cadastrar"  style="text-decoration: none; color: #333; display: flex; align-items: center;">
                        <span class="icon" style="margin-right: 10px;">üö™</span>
                        <span>Cadastro</span>
                    </a>
                </li>
            </ul>
        </nav>
        <button id="toggleSidebar" onclick="toggleMenu()" style="margin: 10px; padding: 10px; background-color: #007bff; color: white; border: none; cursor: pointer;">Ocultar</button>
    </aside>

    <!-- Conte√∫do Principal -->
    <!-- Conte√∫do Principal -->
    <main class="text-center" style="margin-left: 260px; padding: 20px;">
        <h1>Bem-vindo ao Dashboard</h1> 
        <!-- Sauda√ß√£o personalizada -->
        <h6 class="mb-4">
            @if (User.Identity != null && User.Identity.IsAuthenticated)
            {
                @* Exibe o nome do usu√°rio se ele estiver logado *@
                <span>Ol√° @User.Identity.Name @userId, esperamos que esteja bem!</span>

            }
            else
            {
                @* Exibe "Visitante" se o usu√°rio n√£o estiver logado. N√£o tem que acontecer aqui, mas vou deixar por precau√ß√£o. *@
                <span>Bem-vindo, Visitante! Fa√ßa login para acessar suas informa√ß√µes.</span>
            }
        </h6>
        <p>Este √© o conte√∫do principal.</p>

        <!-- Chamar os gr√°ficos aqui -->
        <!-- Verificar se h√° dados -->
        @if (Model != null && Model.Count > 0)
        {
            <table class="table" style="margin: 0 auto; width: 80%; border: 1px solid #ddd; text-align: left;">
                <thead>
                    <tr>
                        <th>Usuario</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var consumo in Model)
                    {
                        <tr>
                            <td>@consumo.IdUsuario</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p>Nenhum dado de consumo encontrado.</p>
        }
    </main>


</div>

<script>
    // Simples l√≥gica de ocultar/exibir o menu lateral
    let isSidebarVisible = true;

    function toggleMenu() {
        const sidebar = document.getElementById('sidebar');
        const toggleButton = document.getElementById('toggleSidebar');

        if (isSidebarVisible) {
            sidebar.style.width = '60px';
            sidebar.querySelectorAll('span:not(.icon)').forEach(el => el.style.display = 'none');
            toggleButton.textContent = 'Expandir';
            isSidebarVisible = false;
        } else {
            sidebar.style.width = '250px';
            sidebar.querySelectorAll('span:not(.icon)').forEach(el => el.style.display = '');
            toggleButton.textContent = 'Ocultar';
            isSidebarVisible = true;
        }
    }

    // Oculta o menu quando clicado fora dele
    document.addEventListener('click', function (event) {
        const sidebar = document.getElementById('sidebar');
        if (!sidebar.contains(event.target) && isSidebarVisible) {
            toggleMenu();
        }
    });
</script>
